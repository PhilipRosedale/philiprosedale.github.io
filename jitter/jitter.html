<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jitter Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Jitter Explorer</h1>
        
        <div class="main-content">
            <div class="animation-area">
                <canvas id="animationCanvas" width="800" height="600"></canvas>
                <div class="fps-display">
                    <span>FPS: </span>
                    <span id="fpsValue">0</span>
                    <span style="margin-left: 20px;">Frame: </span>
                    <span id="frameValue">0</span>
                </div>
                <div class="jitter-display">
                    <span>Normalized Jitter: </span>
                    <span id="jitterValue">0.000</span>
                    <span style="margin-left: 20px;">NFTV: </span>
                    <span id="nftvValue">0.000</span>
                </div>
            </div>
            
            <div class="controls">
                <div class="control-section">
                    <h3>Animation Controls</h3>
                    <div class="velocity-control">
                        <label for="angularVelocityInput">Angular Velocity (rad/s):</label>
                        <input type="number" id="angularVelocityInput" value="2.0" step="0.1" min="0.1" max="10.0">
                        <label for="fpsDivideInput" style="margin-top: 10px;">FPS Divide:</label>
                        <input type="number" id="fpsDivideInput" value="1" step="1" min="0" max="10">
                    </div>
                    
                    <h3>Jitter Controls</h3>
                    <div class="frame-delay-grid">
                        <div class="grid-header">
                            <div class="header-cell">Frame Number</div>
                            <div class="header-cell">Delay (frames)</div>
                        </div>
                        <div id="frameDelayRows">
                            <!-- Rows will be generated by JavaScript -->
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button id="addRowBtn">Add Row</button>
                        <button id="clearAllBtn">Clear All</button>
                        <button id="startStopBtn">Start</button>
                    </div>
                    <div class="checkbox-control">
                        <label for="showDelayCheckbox">
                            <input type="checkbox" id="showDelayCheckbox">
                            <span>Show Delay</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h3>Instructions</h3>
            <p>This tool helps explore the perceptual threshold for detecting jitter in animated displays.</p>
            <ul>
                <li>The white dot rotates smoothly in a circle at the specified angular velocity</li>
                <li>When the frame number matches a "Frame Number" entry, the dot pauses for the specified "Delay" frames</li>
                <li>Adjust the frame numbers and delays to find the threshold where jitter becomes noticeable</li>
                <li>Use "Add Row" to add more jitter events</li>
                <li>Adjust angular velocity to change rotation speed (1.0 rad/s = ~1/6 rotation per second)</li>
                <li><strong>Normalized Jitter</strong> is calculated as: sum(abs(frame-to-frame difference)) / sum(frametimes)</li>
                <li><strong>NFTV (Normalized Frame Time Variance)</strong> is calculated as: stdev(frametime) / mean(frametime)</li>
                <li>Which statistic is a better fit for how jarring you find the experience?</li>
            </ul>
        </div>
    </div>
    
    <script src="jitter.js"></script>
</body>
</html> 